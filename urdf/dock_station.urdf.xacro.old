<?xml version="1.0"?>
<robot name="dock_station" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- Configurable Parameters -->
  <!-- Model scaling (1.0 = 100%, 0.6 = 60%, etc.) -->
  <xacro:property name="model_scale" value="0.6" />

  <!-- Joint limits -->
  <xacro:property name="joint_lower_limit" value="0.0" />
  <xacro:property name="joint_upper_limit" value="2.5" />
  <xacro:property name="joint_effort_limit" value="100" />
  <xacro:property name="joint_velocity_limit" value="0.05" />
  <xacro:property name="joint_damping" value="0.7" />
  <xacro:property name="joint_friction" value="0.0" />

  <!-- Base Link -->
  <link name="base">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://dock_station_sim/models/dock_station/meshes/dock_base.stl"
              scale="${model_scale} ${model_scale} ${model_scale}"/>
      </geometry>
      <material name="white">
        <color rgba="1.0 1.0 1.0 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0.2319" rpy="0 0 0"/>
      <geometry>
        <box size="1.2 1.2 0.4638"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="10.0"/>
      <inertia ixx="0.1" ixy="0.0" ixz="0.0"
               iyy="0.1" iyz="0.0"
               izz="0.1"/>
    </inertial>
  </link>

  <!-- Left Cover Link -->
  <link name="top_left">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://dock_station_sim/models/dock_station/meshes/dock_top_left.stl"
              scale="${model_scale} ${model_scale} ${model_scale}"/>
      </geometry>
      <material name="orange">
        <color rgba="1.0 0.5 0.0 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://dock_station_sim/models/dock_station/meshes/dock_top_left.stl"
              scale="${model_scale} ${model_scale} ${model_scale}"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0"
               iyy="0.01" iyz="0.0"
               izz="0.01"/>
    </inertial>
  </link>

  <!-- Right Cover Link -->
  <link name="top_right">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://dock_station_sim/models/dock_station/meshes/dock_top_right.stl"
              scale="${model_scale} ${model_scale} ${model_scale}"/>
      </geometry>
      <material name="orange">
        <color rgba="1.0 0.5 0.0 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://dock_station_sim/models/dock_station/meshes/dock_top_right.stl"
              scale="${model_scale} ${model_scale} ${model_scale}"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0"
               iyy="0.01" iyz="0.0"
               izz="0.01"/>
    </inertial>
  </link>

  <!-- Left Slider Joint -->
  <joint name="left_slider" type="prismatic">
    <parent link="base"/>
    <child link="top_left"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <axis xyz="0 -1 0"/>
    <limit lower="${joint_lower_limit}" upper="${joint_upper_limit}"
           effort="${joint_effort_limit}" velocity="${joint_velocity_limit}"/>
    <dynamics damping="${joint_damping}" friction="${joint_friction}"/>
  </joint>

  <!-- Right Slider Joint -->
  <joint name="right_slider" type="prismatic">
    <parent link="base"/>
    <child link="top_right"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="${joint_lower_limit}" upper="${joint_upper_limit}"
           effort="${joint_effort_limit}" velocity="${joint_velocity_limit}"/>
    <dynamics damping="${joint_damping}" friction="${joint_friction}"/>
  </joint>

  <!-- Transmission for left slider -->
  <transmission name="left_slider_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="left_slider">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="left_slider_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <!-- Transmission for right slider -->
  <transmission name="right_slider_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="right_slider">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="right_slider_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>

  <!-- Gazebo ROS Control Plugin -->
  <gazebo>
    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
      <robotNamespace>/dock_station</robotNamespace>
      <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
    </plugin>
  </gazebo>

  <!-- Gazebo material properties for links -->
  <gazebo reference="base">
    <material>Gazebo/White</material>
  </gazebo>

  <gazebo reference="top_left">
    <material>Gazebo/Orange</material>
  </gazebo>

  <gazebo reference="top_right">
    <material>Gazebo/Orange</material>
  </gazebo>

</robot>
